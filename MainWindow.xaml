<Window x:Class="patrimonio_digital.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:patrimonio_digital.MVVM.ViewModel"
        xmlns:local="clr-namespace:patrimonio_digital"
		xmlns:conv="clr-namespace:patrimonio_digital.Utils"
        Title="digiPat"
        WindowState="Maximized"
        Background="{DynamicResource WindowBackgroundBrush}"
        FontFamily="{StaticResource Inter}" Icon="/digipat.ico">

    
	<Window.Resources>
		<conv:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
	</Window.Resources>

    <!--
	<Window.DataContext>
		<vm:MainViewModel/>
	</Window.DataContext>
	-->
    
	<Grid>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="240"/>
			<ColumnDefinition Width="*"/>
		</Grid.ColumnDefinitions>

		<DockPanel LastChildFill="True">

			<!-- stackpanel usuário -->
			<StackPanel DockPanel.Dock="Bottom" Margin="0" Orientation="Horizontal" Background="#275563">
                <Path Data="M16.0603 18.307C14.89 19.0619 13.4962 19.5 12 19.5C10.5038 19.5 9.10996 19.0619 7.93972 18.307C8.66519 16.7938 10.2115 15.75 12 15.75C13.7886 15.75 15.3349 16.794 16.0603 18.307ZM17.2545 17.3516C16.2326 15.5027 14.2632 14.25 12 14.25C9.73663 14.25 7.76733 15.5029 6.74545 17.3516C5.3596 15.9907 4.5 14.0958 4.5 12C4.5 7.85786 7.85786 4.5 12 4.5C16.1421 4.5 19.5 7.85786 19.5 12C19.5 14.0958 18.6404 15.9908 17.2545 17.3516ZM21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12ZM12 12C13.2426 12 14.25 10.9926 14.25 9.75C14.25 8.50736 13.2426 7.5 12 7.5C10.7574 7.5 9.75 8.50736 9.75 9.75C9.75 10.9926 10.7574 12 12 12ZM12 13.5C14.0711 13.5 15.75 11.8211 15.75 9.75C15.75 7.67893 14.0711 6 12 6C9.92893 6 8.25 7.67893 8.25 9.75C8.25 11.8211 9.92893 13.5 12 13.5Z"
                      Fill="{DynamicResource ForegroundBrush}"
                      Stretch="Uniform"
                      Width="15"
                      Height="15"
                      Margin="10"/>
                <TextBlock Text="{Binding UsuarioNome, StringFormat='Olá, {0}!'}" FontSize="15" Foreground="{DynamicResource ForegroundBrush}" Margin="0 6" FontWeight="Regular" HorizontalAlignment="Left" VerticalAlignment="Center" />

            </StackPanel>

			<!-- stackpanel sidebar -->
			<Border Grid.Column="0" Background="{DynamicResource SidebarBackgroundBrush}">

				<StackPanel DockPanel.Dock="Top">
					<StackPanel Margin="10" Orientation="Horizontal">
						<Path Data="M6.69 2a1.75 1.75 0 00-1.75 1.756L5 21.253a.75.75 0 001.219.583L12 17.21l5.782 4.625A.75.75 0 0019 21.25V3.75A1.75 1.75 0 0017.25 2H6.69z"
                             Fill="{DynamicResource ForegroundBrush}"
                             Stretch="Uniform"
                             Width="50"
                             Height="50"
                             Margin="10"/>
						<TextBlock Text="digiPat" FontSize="38" Foreground="{DynamicResource ForegroundBrush}" Margin="10" FontWeight="Bold" HorizontalAlignment="Center" />
					</StackPanel>

					<StackPanel Margin="0 20 0 0" Cursor="Hand">

						<StackPanel Orientation="Horizontal" Style="{DynamicResource StackPanelSidebar}">
							<Path Data="M8.56078 20.2501L20.5608 8.25011L15.7501 3.43945L3.75012 15.4395V20.2501H8.56078ZM15.7501 5.56077L18.4395 8.25011L16.5001 10.1895L13.8108 7.50013L15.7501 5.56077ZM12.7501 8.56079L15.4395 11.2501L7.93946 18.7501H5.25012L5.25012 16.0608L12.7501 8.56079Z"
                                Fill="{DynamicResource ForegroundBrush}"
                                Stretch="Uniform"
                                Width="15"
                                Height="15"
                                Margin="10 0 0 0"/>
							<RadioButton x:Name="btnCatalogo" Command="{Binding AbrirJanelaCommand}" CommandParameter="Catalogar" Content= "Registrar Item" Height="50" FontSize="14" Style="{StaticResource MenuButtonTheme}"
                                         />
						</StackPanel>

                        <StackPanel Orientation="Horizontal" Style="{DynamicResource StackPanelSidebar}" Visibility="{Binding PodeGerenciarUsuarios, Converter={StaticResource BoolToVisibilityConverter}}">
							<Path Data="M3 18C3 15.3945 4.66081 13.1768 6.98156 12.348C7.61232 12.1227 8.29183 12 9 12C9.70817 12 10.3877 12.1227 11.0184 12.348C11.3611 12.4703 11.6893 12.623 12 12.8027C12.3107 12.623 12.6389 12.4703 12.9816 12.348C13.6123 12.1227 14.2918 12 15 12C15.7082 12 16.3877 12.1227 17.0184 12.348C19.3392 13.1768 21 15.3945 21 18V21H15.75V19.5H19.5V18C19.5 15.5147 17.4853 13.5 15 13.5C14.4029 13.5 13.833 13.6163 13.3116 13.8275C14.3568 14.9073 15 16.3785 15 18V21H3V18ZM9 11.25C8.31104 11.25 7.66548 11.0642 7.11068 10.74C5.9977 10.0896 5.25 8.88211 5.25 7.5C5.25 5.42893 6.92893 3.75 9 3.75C10.2267 3.75 11.3158 4.33901 12 5.24963C12.6842 4.33901 13.7733 3.75 15 3.75C17.0711 3.75 18.75 5.42893 18.75 7.5C18.75 8.88211 18.0023 10.0896 16.8893 10.74C16.3345 11.0642 15.689 11.25 15 11.25C14.311 11.25 13.6655 11.0642 13.1107 10.74C12.6776 10.4869 12.2999 10.1495 12 9.75036C11.7001 10.1496 11.3224 10.4869 10.8893 10.74C10.3345 11.0642 9.68896 11.25 9 11.25ZM13.5 18V19.5H4.5V18C4.5 15.5147 6.51472 13.5 9 13.5C11.4853 13.5 13.5 15.5147 13.5 18ZM11.25 7.5C11.25 8.74264 10.2426 9.75 9 9.75C7.75736 9.75 6.75 8.74264 6.75 7.5C6.75 6.25736 7.75736 5.25 9 5.25C10.2426 5.25 11.25 6.25736 11.25 7.5ZM15 5.25C13.7574 5.25 12.75 6.25736 12.75 7.5C12.75 8.74264 13.7574 9.75 15 9.75C16.2426 9.75 17.25 8.74264 17.25 7.5C17.25 6.25736 16.2426 5.25 15 5.25Z"
                             Fill="{DynamicResource ForegroundBrush}"
                             Stretch="Uniform"
                             Width="15"
                             Height="15"
                             Margin="10 0 0 0"/>
							<RadioButton x:Name="btnUsuarios"
                                         Command="{Binding AbrirJanelaCommand}"
                                         CommandParameter="Usuarios"
                                         Content="Usuários"
                                         Height="50"
                                         FontSize="14"
                                         Style="{DynamicResource MenuButtonTheme}"
                                         />
						</StackPanel>

                        <StackPanel Orientation="Horizontal" Style="{DynamicResource StackPanelSidebar}"  Visibility="{Binding PodeAuditoria, Converter={StaticResource BoolToVisibilityConverter}}">
							<Path Data="M15 10.5C15 12.9853 12.9853 15 10.5 15C8.01472 15 6 12.9853 6 10.5C6 8.01472 8.01472 6 10.5 6C12.9853 6 15 8.01472 15 10.5ZM14.1793 15.2399C13.1632 16.0297 11.8865 16.5 10.5 16.5C7.18629 16.5 4.5 13.8137 4.5 10.5C4.5 7.18629 7.18629 4.5 10.5 4.5C13.8137 4.5 16.5 7.18629 16.5 10.5C16.5 11.8865 16.0297 13.1632 15.2399 14.1792L20.0304 18.9697L18.9697 20.0303L14.1793 15.2399Z"
                          Fill="{DynamicResource ForegroundBrush}"
                          Stretch="Uniform"
                          Width="15"
                          Height="15"
                          Margin="10 0 0 0"/>
							<RadioButton x:Name="btnAuditoria"
										 Command="{Binding AbrirJanelaCommand}"
										 CommandParameter="Auditoria"
										 Content="Auditoria"
										 Height="50"
										 FontSize="14"
										 Style="{StaticResource MenuButtonTheme}"
										 />
						</StackPanel>

                        <StackPanel Orientation="Horizontal" Style="{DynamicResource StackPanelSidebar}">
                            <Path Data="M10.0512 15.75L9.51642 14.2768L9.18821 14.0137C8.15637 13.1865 7.5 11.9204 7.5 10.5C7.5 8.01472 9.51472 6 12 6C14.4853 6 16.5 8.01472 16.5 10.5C16.5 11.9204 15.8436 13.1865 14.8118 14.0137L14.4836 14.2768L13.9488 15.75H10.0512ZM9 17.25H15L15.75 15.184C17.1217 14.0844 18 12.3948 18 10.5C18 7.18629 15.3137 4.5 12 4.5C8.68629 4.5 6 7.18629 6 10.5C6 12.3948 6.87831 14.0844 8.25 15.184L9 17.25ZM14.25 19.5V18H9.75V19.5H14.25Z"
                                  Fill="{DynamicResource ForegroundBrush}"
                                  Stretch="Uniform"
                                  Width="15"
                                  Height="15"
                                  Margin="10 0 0 0"/>
                            <RadioButton x:Name="btnSobre" Command="{Binding AbrirJanelaCommand}" CommandParameter="Sobre" Content= "Sobre" Height="50" FontSize="14" Style="{StaticResource MenuButtonTheme}"/>
                        </StackPanel>


                    </StackPanel>
				</StackPanel>

			</Border>
		</DockPanel>

		<!-- grid coluna 2 -->
		<Grid Grid.Column="1" Margin="18">
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="*"/>
			</Grid.RowDefinitions>

			<!-- caixa de pesquisa -->
			<StackPanel>

                <StackPanel>
				<TextBox x:Name="CaixaPesquisa"
                         Text="{Binding TextoPesquisa, UpdateSourceTrigger=PropertyChanged}"
                         Style="{DynamicResource TextBoxTheme}"
                         Margin="0 0 0 10"
                         Height="35"
                         Width="Auto"/>
				</StackPanel>

                <TextBlock Text="{Binding Itens.Count, StringFormat='{}{0} itens encontrados.'}"
                           FontSize="12"
                           Foreground="{DynamicResource ForegroundBrush}"
                           FontWeight="Light"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Bottom"/>


                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Hidden">
                    
					<ItemsControl Margin="0 10 0 0" ItemsSource="{Binding ItensView}">
						<ItemsControl.ItemTemplate>
							<DataTemplate>
								<Border Style="{DynamicResource CardStyle}" Margin="0 0 0 10">
									<Grid>
										<Grid.ColumnDefinitions>
											<ColumnDefinition Width="*"/>
											<ColumnDefinition Width="50"/>
										</Grid.ColumnDefinitions>

										<StackPanel Grid.Column="0" Cursor="Hand">
											<StackPanel.InputBindings>
												<MouseBinding MouseAction="LeftClick"
                                                              Command="{Binding DataContext.AbrirEditorCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                                              CommandParameter="{Binding}"/>
											</StackPanel.InputBindings>

											<TextBlock Text="{Binding Nome}" FontWeight="Bold" Foreground="{DynamicResource ForegroundBrush}" FontSize="16"/>
											<TextBlock Text="{Binding Autor, StringFormat='Autoria: {0}'}" Foreground="{DynamicResource SecondaryForegroundBrush}" Margin="0 3"/>
											<TextBlock Text="{Binding Data, StringFormat='Data: {0}'}" Foreground="{DynamicResource SecondaryForegroundBrush}" Margin="0 3"/>
											<TextBlock Text="{Binding Origem, StringFormat='Origem: {0}'}" Foreground="{DynamicResource SecondaryForegroundBrush}" Margin="0 3"/>
											<TextBlock Text="{Binding Tipo, StringFormat='Tipo: {0}'}" Foreground="{DynamicResource SecondaryForegroundBrush}" Margin="0 3"/>
											<TextBlock Text="{Binding EstadoCons, StringFormat='Estado de Conservação: {0}'}" Foreground="{DynamicResource SecondaryForegroundBrush}" Margin="0 3"/>
											<TextBlock Text="{Binding SetorFisico, StringFormat='Setor Físico: {0}'}" Foreground="{DynamicResource SecondaryForegroundBrush}" Margin="0 3"/>
										</StackPanel>

										<!-- stackpanel botões CRUD -->
										<StackPanel Grid.Column="1" Orientation="Vertical">

											<Button FontSize="25"
                                                    Content="🗙"
                                                    Command="{Binding DataContext.ExcluirItemCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                                    CommandParameter="{Binding}"
                                                    BorderThickness="0"
                                                    Background="Transparent"
                                                    Foreground="{DynamicResource SecondaryForegroundBrush}"
                                                    Visibility="{Binding DataContext.PodeExcluir, RelativeSource={RelativeSource AncestorType=ItemsControl}, Converter={StaticResource BoolToVisibilityConverter}}" />

											<Button FontSize="25"
                                                    Content="🖉"
                                                    Command="{Binding DataContext.AbrirEditorCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                                    CommandParameter="{Binding}"
                                                    BorderThickness="0"
                                                    Background="Transparent"
                                                    Foreground="{DynamicResource SecondaryForegroundBrush}"
                                                    Visibility="{Binding DataContext.PodeCatalogar, RelativeSource={RelativeSource AncestorType=ItemsControl}, Converter={StaticResource BoolToVisibilityConverter}}" />

										</StackPanel>

									</Grid>
								</Border>
							</DataTemplate>
						</ItemsControl.ItemTemplate>
					</ItemsControl>
				</ScrollViewer>
			</StackPanel>

		</Grid>
	</Grid>
</Window>
